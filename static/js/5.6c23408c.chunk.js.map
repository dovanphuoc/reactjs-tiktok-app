{"version":3,"sources":["axiosInstance.js","components/common/Button/Button.js","components/common/Button/Button.module.scss","redux/actions/index.js","redux/services/services.js","components/Login/Login.js","components/Register/Register.js","components/Login/Login.module.scss","components/Register/Register.module.scss","assets/img/user.jpg","components/PostDetailModal/PostDetailModal.module.scss","components/PostItem/PostItem.module.scss","utils/storage.js","components/PostDetailModal/Comment/Comment.js","components/PostDetailModal/PostDetailModal.js","assets/img/logo.png","components/PostItem/PostItem.js","container/Home/Home.js"],"names":["instance","axios","create","baseURL","defaults","headers","common","window","localStorage","getItem","interceptors","response","use","data","error","Promise","reject","defaultFn","Button","color","type","to","href","openNewTab","children","onClick","onFollowUser","onShowModal","size","underline","marginLeft","marginTop","hover","border","hoverPrimaryColor","floatRight","textCenter","actived","bgPrimary","borderOpacity","colorGrey","restProps","Component","rests","classNames","styles","wrapper","target","Link","className","join","module","exports","loginModal","LOGIN_MODAL","registerModal","REGISTER_MODAL","hideModal","HIDE_MODAL","fetchUser","FETCH_USER","fetchUserSuccess","user","FETCH_USER_SUCCESS","payload","fetchUserFailed","FETCH_USER_FAILED","fetchUserService","dispatch","axiosInstance","get","then","res","catch","err","Login","title","accountTitle","loginText","onShowModalLogin","onCloseModal","onHandleLogin","useState","email","password","setUser","errors","setErrors","btnClose","icon","onSubmit","e","preventDefault","post","setItem","meta","token","location","reload","status_code","resErrors","Object","keys","forEach","field","formGroup","name","id","placeholder","value","onChange","Register","onShowModalRegister","onSubmirForm","passwordConfirm","storageKey","store","jsonData","assign","JSON","parse","console","log","save","stringify","key","defaultValue","undefined","set","remove","flush","Comment","commentPost","onDeleteComment","imageRef","useRef","commentItem","commentContent","nickname","onError","current","src","userImage","ref","avatar","alt","commentWrap","nicknameCmt","commentText","cmt","comment","bottomContainer","commentTime","deleteComment","likeContainer","likeCounts","likes_count","PostDetailModal","isMuted","onCloseBtn","onToggleMute","onNextVideo","onPrevVideo","onLikeCount","videoId","customStyles","content","top","left","right","bottom","marginRight","transform","videoRef","isPlaying","setIsPlaying","currentTime","setCurrentTime","valueInput","setValueInput","isValueInput","setIsValueInput","modalLogin","useSelector","state","modal","modalRegister","useDispatch","comments","setComments","useEffect","isMounted","ontimeupdate","getTime","useLayoutEffect","handleDeleteComment","delete","commentIndex","findIndex","newComment","splice","videoFixed","videoContainer","thumbnail","thumb_url","image","video","file_url","muted","loop","poster","autoPlay","paused","play","pause","btnPlay","playIcon","logo","btnIcon","btn","vlBtn","vlIcon","faVolumeMute","faVolumeUp","downBtn","btnChervon","iconDown","upBtn","iconUp","contentContainer","userInfoContainer","userInfo","userInfoLink","firstName","first_name","isOpen","style","action","videoInfoContainer","actionContainer","display","actionItem","iconWrap","barItem","iconHeart","is_liked","likeIcon","votes","comments_count","actionRight","shareContainer","shareGroup","WhatsappShareButton","shareBtn","url","WhatsappIcon","iconFa","round","FacebookShareButton","FacebookIcon","TwitterShareButton","TwitterIcon","copyLinkContainer","linkContainer","copyContainer","commentContainer","map","active","logoutContainer","desc","signUp","loginBtn","PostItem","hastag","stopWhenPaused","isWaypoint","onShowDetail","getVideoRef","onTogglePlay","onEnterWaypoint","onCommentCount","closeModal","postItem","config","routes","home","last_name","userAvatar","avatarImg","postContent","infoContent","rel","authorUnique","fullName","caption","description","btnFollow","is_followed","videoItem","cardWrapper","cardImage","onEnter","topOffset","innerHeight","bottomOffset","width","videoWidth","resolution_x","videoHeight","resolution_y","getVideoWidth","overlay","playBtn","faPause","faPlay","iconAction","itemWrapper","shares_count","Home","total","perPage","currentPage","totalPages","pagination","setPagination","posts","setPosts","postInViewport","setPostInViewport","storage","setIsMuted","currentPost","setCurrentPost","videoRefs","currentVideoRef","prevState","current_page","per_page","total_pages","getVideoRefByPostId","postId","handleVideoRef","setVideoRefByPostId","checkPlaying","handleToggleMute","handleTogglePlay","handleFollowUser","apiPath","index","item","newPost","newPosts","handleWaypointEnter","handleLikeCount","postIndex","slice","handleCommentCount","history","pushState","document","getPostURL","handleShowDetailPost","scrollRestoration","scrollPostIntoView","useCallback","scrollIntoView","block","replaceState","padding","uuidv4","back","currentIndex","length","onSubmitForm","dataComment","onChangeValue","uuid"],"mappings":"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","file":"static/js/5.6c23408c.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst instance = axios.create({\r\n    baseURL: 'https://tiktok.f8team.dev'\r\n})\r\n\r\ninstance.defaults.headers.common['Authorization'] = 'Bearer ' + window.localStorage.getItem('token')\r\ninstance.interceptors.response.use(\r\n    function (response) {\r\n        return response.data\r\n    },\r\n    function (error) {\r\n        return Promise.reject(error)\r\n    }\r\n)\r\nexport default instance\r\n","import React from 'react'\r\nimport styles from './Button.module.scss'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst defaultFn = () => {}\r\nconst Button = ({\r\n    color = 'black',\r\n    type = 'primary',\r\n    to = '',\r\n    href = '',\r\n    openNewTab = false,\r\n    children = null,\r\n    onClick = defaultFn,\r\n    onFollowUser = defaultFn,\r\n    onShowModal = defaultFn,\r\n    size = 'm',\r\n    underline,\r\n    marginLeft,\r\n    marginTop,\r\n    hover,\r\n    border,\r\n    hoverPrimaryColor,\r\n    floatRight,\r\n    textCenter,\r\n    actived,\r\n    bgPrimary,\r\n    borderOpacity,\r\n    colorGrey,\r\n    ...restProps\r\n}) => {\r\n    let Component = 'button'\r\n    const rests = {}\r\n    let classNames = [\r\n        styles.wrapper,\r\n        styles[type],\r\n        styles[color],\r\n        styles[size],\r\n        underline ? styles.underline : '',\r\n        marginLeft ? styles.marginLeft : '',\r\n        hover ? styles.hover : '',\r\n        border ? styles.border : '',\r\n        marginTop ? styles.marginTop : '',\r\n        hoverPrimaryColor ? styles.hoverPrimaryColor : '',\r\n        textCenter ? styles.textCenter : '',\r\n        floatRight ? styles.floatRight : '',\r\n        actived ? styles.actived : '',\r\n        bgPrimary ? styles.bgPrimary : '',\r\n        borderOpacity ? styles.borderOpacity : '',\r\n        colorGrey ? styles.colorGrey : ''\r\n    ]\r\n    if (href) {\r\n        Component = 'a'\r\n        rests.href = href\r\n        if (openNewTab) {\r\n            rests.target = '_blank'\r\n        }\r\n    }\r\n    if (to) {\r\n        Component = Link\r\n        rests.to = to\r\n    }\r\n    return (\r\n        <Component {...rests} {...restProps} onClick={onClick} className={classNames.join(' ')}>\r\n            <span>{children}</span>\r\n        </Component>\r\n    )\r\n}\r\n\r\nexport default Button\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Button_wrapper__3VBot\",\"default\":\"Button_default__3RbwM\",\"black\":\"Button_black__yneyv\",\"blackOpacity\":\"Button_blackOpacity__kgY8F\",\"white\":\"Button_white__2ajT2\",\"hoverPrimaryColor\":\"Button_hoverPrimaryColor__3_avb\",\"colorPrimary\":\"Button_colorPrimary__3geDA\",\"m\":\"Button_m__1tyI4\",\"ls\":\"Button_ls__iHST-\",\"l\":\"Button_l__2JWd0\",\"xxl\":\"Button_xxl__218Cw\",\"sm\":\"Button_sm__2p_E1\",\"sl\":\"Button_sl__1L1e5\",\"ssl\":\"Button_ssl__m6iR6\",\"xl\":\"Button_xl__vSnCR\",\"textCenter\":\"Button_textCenter__1mqCt\",\"primary\":\"Button_primary__2mXSs\",\"hover\":\"Button_hover__tqAkq\",\"marginLeft\":\"Button_marginLeft__3W7rX\",\"marginTop\":\"Button_marginTop__3Pwrv\",\"borderOpacity\":\"Button_borderOpacity__3QCTp\",\"border\":\"Button_border__12caY\",\"red\":\"Button_red__3JWsZ\",\"underline\":\"Button_underline__3SrDX\",\"floatRight\":\"Button_floatRight__8rYfM\",\"actived\":\"Button_actived__2M4M_\",\"bgPrimary\":\"Button_bgPrimary__3fFg4\",\"colorGrey\":\"Button_colorGrey__1NwKW\"};","import { FETCH_USER, FETCH_USER_FAILED, FETCH_USER_SUCCESS, HIDE_MODAL, LOGIN_MODAL, REGISTER_MODAL } from './constant'\r\n\r\nimport fetchAvatarService from '../services/services'\r\n\r\nexport default avatar => {\r\n  return dispatch => {\r\n    dispatch(FETCH_USER())\r\n    fetchAvatarService(avatar)\r\n      .then(item => dispatch(FETCH_USER_SUCCESS(item)))\r\n      .catch(error => dispatch(FETCH_USER_FAILED(error)))\r\n  }\r\n}\r\n\r\nexport const loginModal = () => {\r\n  return {\r\n    type: LOGIN_MODAL\r\n  }\r\n}\r\n\r\nexport const registerModal = () => {\r\n  return {\r\n    type: REGISTER_MODAL\r\n  }\r\n}\r\n\r\nexport const hideModal = () => {\r\n  return {\r\n    type: HIDE_MODAL\r\n  }\r\n}\r\n\r\nexport const fetchUser = () => ({\r\n  type: FETCH_USER\r\n})\r\n\r\nexport const fetchUserSuccess = user => ({\r\n  type: FETCH_USER_SUCCESS,\r\n  payload: {\r\n    user\r\n  }\r\n})\r\n\r\nexport const fetchUserFailed = error => ({\r\n  type: FETCH_USER_FAILED,\r\n  payload: { error }\r\n})\r\n","import axiosInstance from '../../axiosInstance'\r\nimport { fetchUser, fetchUserSuccess, fetchUserFailed } from '../actions'\r\n\r\nconst fetchUserService = () => {\r\n  return dispatch => {\r\n    dispatch(fetchUser())\r\n    axiosInstance\r\n      .get('/api/auth/me')\r\n      .then(res => {\r\n        const data = res.data\r\n        dispatch(fetchUserSuccess(data))\r\n      })\r\n      .catch(err => {\r\n        dispatch(fetchUserFailed(err))\r\n      })\r\n  }\r\n}\r\nexport default fetchUserService\r\n","import React, { useState } from 'react'\r\nimport Button from '../common/Button'\r\nimport styles from './Login.module.scss'\r\nimport { AiFillCloseCircle } from 'react-icons/ai'\r\nimport axiosInstance from '../../axiosInstance'\r\n\r\nconst defaultFn = () => {}\r\nconst Login = ({\r\n  title = '',\r\n  accountTitle = '',\r\n  loginText = '',\r\n  onShowModalLogin = defaultFn,\r\n  onCloseModal = defaultFn,\r\n  onHandleLogin = defaultFn\r\n}) => {\r\n  const [user, setUser] = useState({ email: '', password: '' })\r\n  const [errors, setErrors] = useState({})\r\n\r\n  const handleSubmitForm = e => {\r\n    e.preventDefault()\r\n    axiosInstance\r\n      .post('/api/auth/login', user)\r\n      .then(res => {\r\n        window.localStorage.setItem('token', res.meta.token)\r\n        window.location.reload()\r\n      })\r\n      .catch(err => {\r\n        let status_code = err.response.data.status_code\r\n        switch (status_code) {\r\n          case 422:\r\n            const resErrors = {}\r\n            Object.keys(err.response.data.errors).forEach(field => {\r\n              resErrors[field] = err.response.data.errors[field][0]\r\n            })\r\n            setErrors(resErrors)\r\n            break\r\n          default:\r\n            setErrors({\r\n              ...errors,\r\n              password: 'Account has used'\r\n            })\r\n        }\r\n      })\r\n  }\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <h3 className={styles.title}>{title}</h3>\r\n      <button className={styles.btnClose} onClick={onCloseModal}>\r\n        <AiFillCloseCircle className={styles.icon} />\r\n      </button>\r\n      <form onSubmit={handleSubmitForm}>\r\n        <div className={styles.formGroup}>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            placeholder=\"Enter your email\"\r\n            value={user.email}\r\n            onChange={e => {\r\n              setUser({ ...user, email: e.target.value })\r\n              setErrors({\r\n                ...errors,\r\n                email: null\r\n              })\r\n            }}\r\n          />\r\n          <span>{errors.email}</span>\r\n        </div>\r\n        <div className={styles.formGroup}>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Enter your password\"\r\n            value={user.password}\r\n            onChange={e => {\r\n              setUser({ ...user, password: e.target.value })\r\n              setErrors({\r\n                ...errors,\r\n                password: null\r\n              })\r\n            }}\r\n          />\r\n          <span>{errors.password}</span>\r\n        </div>\r\n        <Button children=\"Submit\" type=\"primary\" size=\"m\" color=\"white\" floatRight marginTop onClick={onHandleLogin} />\r\n      </form>\r\n      <h5>\r\n        {accountTitle}\r\n        <span onClick={onShowModalLogin}>{loginText}</span>\r\n      </h5>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React, { useState } from 'react'\r\nimport Button from '../common/Button'\r\nimport styles from './Register.module.scss'\r\nimport { AiFillCloseCircle } from 'react-icons/ai'\r\nimport axiosInstance from '../../axiosInstance'\r\n\r\nconst defaultFn = () => {}\r\nconst Register = ({\r\n    title = '',\r\n    accountTitle = '',\r\n    loginText = '',\r\n    onShowModalRegister = defaultFn,\r\n    onCloseModal = defaultFn,\r\n    onSubmirForm = defaultFn\r\n}) => {\r\n    const [user, setUser] = useState({ type: 'email', email: '', password: '', passwordConfirm: '' })\r\n    const [errors, setErrors] = useState({})\r\n\r\n    const handleSubmitForm = e => {\r\n        e.preventDefault()\r\n        axiosInstance\r\n            .post('/api/auth/register', user)\r\n            .then(res => {\r\n                window.localStorage.setItem('token', res.meta.token)\r\n                window.location.reload()\r\n            })\r\n            .catch(err => {\r\n                let status_code = err.response.data.status_code\r\n                switch (status_code) {\r\n                    case 422:\r\n                        const resErrors = {}\r\n                        Object.keys(err.response.data.errors).forEach(field => {\r\n                            resErrors[field] = err.response.data.errors[field][0]\r\n                        })\r\n                        setErrors(resErrors)\r\n                        break\r\n                    default:\r\n                        setErrors({\r\n                            ...errors,\r\n                            password: 'Account has used please register another account'\r\n                        })\r\n                }\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <h3 className={styles.title}>{title}</h3>\r\n            <button className={styles.btnClose} onClick={onCloseModal}>\r\n                <AiFillCloseCircle className={styles.icon} />\r\n            </button>\r\n            <form onSubmit={handleSubmitForm}>\r\n                <div className={styles.formGroup}>\r\n                    <input\r\n                        name=\"email\"\r\n                        id=\"email\"\r\n                        placeholder=\"Enter your email\"\r\n                        value={user.email}\r\n                        onChange={e => {\r\n                            setUser({ ...user, email: e.target.value })\r\n                            setErrors({\r\n                                ...errors,\r\n                                email: null\r\n                            })\r\n                        }}\r\n                    />\r\n                    <span>{errors.email}</span>\r\n                </div>\r\n                <div className={styles.formGroup}>\r\n                    <input\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        id=\"password\"\r\n                        placeholder=\"Enter your password\"\r\n                        value={user.password}\r\n                        onChange={e => {\r\n                            setUser({ ...user, password: e.target.value })\r\n                            setErrors({\r\n                                ...errors,\r\n                                password: null\r\n                            })\r\n                        }}\r\n                    />\r\n                    <span>{errors.password}</span>\r\n                </div>\r\n                <div className={styles.formGroup}>\r\n                    <input\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        id=\"password\"\r\n                        placeholder=\"Enter your password confirmation\"\r\n                        value={user.passwordConfirm}\r\n                        onChange={e => {\r\n                            setUser({ ...user, passwordConfirm: e.target.value })\r\n                            setErrors({\r\n                                ...errors,\r\n                                passwordConfirm: null\r\n                            })\r\n                        }}\r\n                    />\r\n                    <span>{errors.password}</span>\r\n                </div>\r\n                <Button\r\n                    children=\"Submit\"\r\n                    type=\"primary\"\r\n                    size=\"m\"\r\n                    color=\"white\"\r\n                    floatRight\r\n                    marginTop\r\n                    onClick={onSubmirForm}\r\n                />\r\n            </form>\r\n            <h5>\r\n                {accountTitle}\r\n                <span onClick={onShowModalRegister}>{loginText}</span>\r\n            </h5>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Login_wrapper__3w4Ye\",\"title\":\"Login_title__2kMBp\",\"btnClose\":\"Login_btnClose__80qw6\",\"icon\":\"Login_icon__3baWJ\",\"formGroup\":\"Login_formGroup__BhjHD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Register_wrapper__10hrF\",\"title\":\"Register_title__y2vp2\",\"btnClose\":\"Register_btnClose__Htinv\",\"icon\":\"Register_icon__3nNhX\",\"formGroup\":\"Register_formGroup__3ELUf\"};","export default \"data:image/jpeg;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"videoFixed\":\"PostDetailModal_videoFixed__3ULIL\",\"videoContainer\":\"PostDetailModal_videoContainer__1pp_V\",\"thumbnail\":\"PostDetailModal_thumbnail__3L7IQ\",\"image\":\"PostDetailModal_image__ZP4dg\",\"video\":\"PostDetailModal_video__2Enbe\",\"playIcon\":\"PostDetailModal_playIcon__2i2nU\",\"icon\":\"PostDetailModal_icon__3lMR9\",\"logo\":\"PostDetailModal_logo__2nHfr\",\"btnIcon\":\"PostDetailModal_btnIcon__AHn3d\",\"muteIcon\":\"PostDetailModal_muteIcon__vPekR\",\"soundWrapper\":\"PostDetailModal_soundWrapper__2eVhr\",\"btnChervon\":\"PostDetailModal_btnChervon__3QnDB\",\"downBtn\":\"PostDetailModal_downBtn__1w6YT\",\"upBtn\":\"PostDetailModal_upBtn__2b9Ow\",\"iconDown\":\"PostDetailModal_iconDown__20-rm\",\"iconUp\":\"PostDetailModal_iconUp__2wdkg\",\"contentContainer\":\"PostDetailModal_contentContainer__ApiyM\",\"userInfoContainer\":\"PostDetailModal_userInfoContainer__37l95\",\"userInfo\":\"PostDetailModal_userInfo__3zGVC\",\"avatar\":\"PostDetailModal_avatar__yLTF4\",\"userInfoLink\":\"PostDetailModal_userInfoLink__VmoTM\",\"nickname\":\"PostDetailModal_nickname__1a3Dx\",\"firstName\":\"PostDetailModal_firstName__jCXHW\",\"videoInfoContainer\":\"PostDetailModal_videoInfoContainer__13X0o\",\"actionContainer\":\"PostDetailModal_actionContainer__2z-eK\",\"action\":\"PostDetailModal_action__aUOy-\",\"actionItem\":\"PostDetailModal_actionItem__1_EZ5\",\"votes\":\"PostDetailModal_votes__E8s02\",\"shareContainer\":\"PostDetailModal_shareContainer__2kuPM\",\"shareLink\":\"PostDetailModal_shareLink__2QRwI\",\"iconApp\":\"PostDetailModal_iconApp__2yoHm\",\"iconFa\":\"PostDetailModal_iconFa__1iroQ\",\"iconShare\":\"PostDetailModal_iconShare__1G8ah\",\"copyLinkContainer\":\"PostDetailModal_copyLinkContainer__2MrCt\",\"linkContainer\":\"PostDetailModal_linkContainer__1FwBr\",\"copyContainer\":\"PostDetailModal_copyContainer__1m7Ym\",\"btn\":\"PostDetailModal_btn__1BJ7j\",\"shareBtn\":\"PostDetailModal_shareBtn__3sVwL\",\"btnPlay\":\"PostDetailModal_btnPlay__3_m3y\",\"commentContainer\":\"PostDetailModal_commentContainer__JARgN\",\"logoutContainer\":\"PostDetailModal_logoutContainer__2R4b6\",\"desc\":\"PostDetailModal_desc__QdQwA\",\"signUp\":\"PostDetailModal_signUp__2JEPL\",\"loginBtn\":\"PostDetailModal_loginBtn__1Eugf\",\"active\":\"PostDetailModal_active__1rM_Z\",\"comments\":\"PostDetailModal_comments__3dAjj\",\"commentItem\":\"PostDetailModal_commentItem__2Ci13\",\"nicknameCmt\":\"PostDetailModal_nicknameCmt__2GNpC\",\"cmt\":\"PostDetailModal_cmt__3pCq1\",\"bottomContainer\":\"PostDetailModal_bottomContainer__1nK2n\",\"deleteComment\":\"PostDetailModal_deleteComment__3r15l\",\"commentTime\":\"PostDetailModal_commentTime__JY7Vt\",\"commentContent\":\"PostDetailModal_commentContent__2YJZB\",\"commentText\":\"PostDetailModal_commentText__X0VU_\",\"likeContainer\":\"PostDetailModal_likeContainer__1E74s\",\"likeCounts\":\"PostDetailModal_likeCounts__3Wvcj\",\"barItem\":\"PostDetailModal_barItem__1PDP6\",\"likeIcon\":\"PostDetailModal_likeIcon__3Zfgv\",\"iconHeart\":\"PostDetailModal_iconHeart__2lXsV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postItem\":\"PostItem_postItem__2wpE6\",\"userAvatar\":\"PostItem_userAvatar__14KIN\",\"avatarImg\":\"PostItem_avatarImg__3WpGn\",\"postContent\":\"PostItem_postContent__1UcGl\",\"infoContent\":\"PostItem_infoContent__2eXAR\",\"authorUnique\":\"PostItem_authorUnique__2TltR\",\"fullName\":\"PostItem_fullName__2rPbU\",\"caption\":\"PostItem_caption__34dlT\",\"btnFollow\":\"PostItem_btnFollow__Pn87t\",\"video\":\"PostItem_video__UssSm\",\"videoItem\":\"PostItem_videoItem__3d4x5\",\"cardWrapper\":\"PostItem_cardWrapper__1NJfr\",\"cardImage\":\"PostItem_cardImage__ERlor\",\"playBtn\":\"PostItem_playBtn__2IlyK\",\"overlay\":\"PostItem_overlay__21Gtx\",\"vlBtn\":\"PostItem_vlBtn__jBhDK\",\"vlIcon\":\"PostItem_vlIcon__1N-aZ\",\"iconAction\":\"PostItem_iconAction__2ayB8\",\"itemWrapper\":\"PostItem_itemWrapper__FRrVQ\",\"barItem\":\"PostItem_barItem__3kZG0\",\"icon\":\"PostItem_icon__1MFjD\",\"likeIcon\":\"PostItem_likeIcon__1kmLo\",\"content\":\"PostItem_content__3vzvX\"};","const STORAGE_KEY = '__storage__'\r\n\r\nfunction Storage(storageKey) {\r\n    const store = {}\r\n\r\n    try {\r\n        const jsonData = window.localStorage.getItem(storageKey)\r\n        Object.assign(store, JSON.parse(jsonData))\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n    const save = () => {\r\n        window.localStorage.setItem(storageKey, JSON.stringify(store))\r\n    }\r\n    return {\r\n        get(key, defaultValue = null) {\r\n            const value = store[key]\r\n            return value !== undefined ? value : defaultValue\r\n        },\r\n        set(key, value) {\r\n            store[key] = value\r\n            save()\r\n        },\r\n        remove(key) {\r\n            delete store[key]\r\n            save()\r\n        },\r\n        flush() {\r\n            Object.keys(store).forEach(key => delete store[key])\r\n            save()\r\n        }\r\n    }\r\n}\r\nexport default new Storage(STORAGE_KEY)\r\n","import React, { useRef } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport styles from '../PostDetailModal.module.scss'\r\nimport userImage from '../../../assets/img/user.jpg'\r\nimport { AiFillHeart } from 'react-icons/ai'\r\nconst defaultFn = () => {}\r\nconst Comment = ({ commentPost, onDeleteComment = defaultFn }) => {\r\n  const imageRef = useRef(null)\r\n\r\n  const handleErrorImage = () => {\r\n    imageRef.current.src = userImage\r\n  }\r\n\r\n  return (\r\n    <div className={styles.commentItem}>\r\n      <div className={styles.commentContent}>\r\n        <Link to={`/@${commentPost.user.nickname}`}>\r\n          <img\r\n            onError={handleErrorImage}\r\n            ref={imageRef}\r\n            src={commentPost.user.avatar}\r\n            alt=\"avatar\"\r\n            className={styles.avatar}\r\n          />\r\n        </Link>\r\n        <div className={styles.commentWrap}>\r\n          <Link className={styles.nicknameCmt} to={`/@${commentPost.user.nickname}`}>\r\n            {commentPost.user.nickname}\r\n          </Link>\r\n          <div className={styles.commentText}>\r\n            <span className={styles.cmt}>{commentPost.comment}</span>\r\n            <div className={styles.bottomContainer}>\r\n              <span className={styles.commentTime}>1 giây trước</span>\r\n              <span onClick={() => onDeleteComment(commentPost)} className={styles.deleteComment}>\r\n                Xóa\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={styles.likeContainer}>\r\n          <AiFillHeart className={styles.icon} />\r\n          <span className={styles.likeCounts}>{commentPost.likes_count}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Comment\r\n","import React, { useRef, useState, useEffect, useLayoutEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport styles from './PostDetailModal.module.scss'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faVolumeMute, faVolumeUp } from '@fortawesome/free-solid-svg-icons'\r\nimport { AiFillCloseCircle, AiFillHeart } from 'react-icons/ai'\r\nimport { FaAngleDown, FaAngleUp, FaCommentDots, FaPlay } from 'react-icons/fa'\r\nimport logo from '../../assets/img/logo.png'\r\nimport Button from '../../components/common/Button'\r\nimport Modal from 'react-modal'\r\nimport Login from '../Login'\r\nimport Register from '../../components/Register'\r\nimport Comment from './Comment'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { hideModal, loginModal, registerModal } from '../../redux/actions'\r\nimport userImage from '../../assets/img/user.jpg'\r\nimport axiosInstance from '../../axiosInstance'\r\n\r\nimport {\r\n  FacebookShareButton,\r\n  WhatsappShareButton,\r\n  TwitterShareButton,\r\n  FacebookIcon,\r\n  WhatsappIcon,\r\n  TwitterIcon\r\n} from 'react-share'\r\n\r\nconst defaultFn = () => {}\r\nconst PostDetailModal = ({\r\n  isMuted = false,\r\n  onCloseBtn = defaultFn,\r\n  onToggleMute = defaultFn,\r\n  onNextVideo = defaultFn,\r\n  onPrevVideo = defaultFn,\r\n  onFollowUser = defaultFn,\r\n  onLikeCount = defaultFn,\r\n  data,\r\n  videoId\r\n}) => {\r\n  const customStyles = {\r\n    content: {\r\n      top: '50%',\r\n      left: '50%',\r\n      right: 'auto',\r\n      bottom: 'auto',\r\n      marginRight: '-50%',\r\n      transform: 'translate(-50%, -50%)'\r\n    }\r\n  }\r\n\r\n  const token = window.localStorage.getItem('token')\r\n  const LOGIN_MODAL = 'LOGIN_MODAL'\r\n  const REGISTER_MODAL = 'REGISTER_MODAL'\r\n  const videoRef = useRef(null)\r\n  const [isPlaying, setIsPlaying] = useState(false)\r\n  const [currentTime, setCurrentTime] = useState(0)\r\n  const [valueInput, setValueInput] = useState('')\r\n  const [isValueInput, setIsValueInput] = useState(false)\r\n  const imageRef = useRef(null)\r\n  const modalLogin = useSelector(state => state.modal.modalLogin)\r\n  const modalRegister = useSelector(state => state.modal.modalRegister)\r\n  const dispatch = useDispatch()\r\n  const [comments, setComments] = useState([])\r\n  const getVideoRef = ref => {\r\n    if (ref) {\r\n      videoRef.current = ref\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isMounted = true\r\n    videoRef.current.ontimeupdate = function () {\r\n      if (isMounted) {\r\n        const getTime = videoRef.current.currentTime\r\n        setCurrentTime(getTime)\r\n      }\r\n    }\r\n    return () => {\r\n      isMounted = false\r\n    }\r\n  }, [currentTime])\r\n\r\n  useEffect(() => {\r\n    if (valueInput !== '') {\r\n      setIsValueInput(true)\r\n    } else {\r\n      setIsValueInput(false)\r\n    }\r\n  }, [valueInput])\r\n\r\n  useLayoutEffect(() => {\r\n    if (videoId === null) return\r\n    axiosInstance\r\n      .get(`/api/posts/${videoId}/comments`)\r\n      .then(res => {\r\n        setComments(res.data)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }, [])\r\n\r\n  const handlePausePlayVideo = () => {\r\n    if (videoRef.current.paused) {\r\n      videoRef.current.currentTime = currentTime\r\n      videoRef.current.play()\r\n      setIsPlaying(!isPlaying)\r\n    } else {\r\n      videoRef.current.pause()\r\n      setIsPlaying(true)\r\n    }\r\n  }\r\n\r\n  const handlePlayVideo = () => {\r\n    videoRef.current.play()\r\n    setIsPlaying(!isPlaying)\r\n  }\r\n\r\n  const handleErrorImage = () => {\r\n    imageRef.current.src = userImage\r\n  }\r\n\r\n  const openModal = () => {\r\n    const action = loginModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const closeModal = () => {\r\n    const action = hideModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const handleShowModalRegister = () => {\r\n    const action = registerModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const handleShowModalLogin = () => {\r\n    const action = loginModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    if (valueInput === '') return\r\n    axiosInstance\r\n      .post(`/api/posts/${videoId}/comments`, {\r\n        comment: valueInput\r\n      })\r\n      .then(res => {\r\n        const newComment = res.data\r\n        setComments([newComment, ...comments])\r\n        setValueInput('')\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  const handleDeleteComment = post => {\r\n    axiosInstance.delete(`/api/comments/${post.id}`).catch(err => {\r\n      console.log(err)\r\n    })\r\n    const commentIndex = comments.findIndex(comment => comment.id === post.id)\r\n    const newComment = comments.splice(commentIndex, 1)\r\n    setComments(newComment)\r\n  }\r\n\r\n  const handleChangeValue = e => {\r\n    setValueInput(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.videoFixed}>\r\n        <div className={styles.videoContainer}>\r\n          <div className={styles.thumbnail}>\r\n            <img src={data.thumb_url} alt=\"anh video\" className={styles.image} />\r\n          </div>\r\n          <video\r\n            ref={getVideoRef}\r\n            className={styles.video}\r\n            src={data.file_url}\r\n            muted={isMuted}\r\n            loop\r\n            poster={data.thumb_url}\r\n            autoPlay\r\n            onClick={handlePausePlayVideo}\r\n          />\r\n          {isPlaying ? (\r\n            <button className={styles.btnPlay} onClick={handlePlayVideo}>\r\n              <FaPlay className={styles.playIcon} />\r\n            </button>\r\n          ) : (\r\n            ''\r\n          )}\r\n          <img src={logo} alt=\"logo\" className={styles.logo} />\r\n\r\n          <button className={styles.btnIcon} onClick={onCloseBtn}>\r\n            <AiFillCloseCircle className={styles.icon} />\r\n          </button>\r\n          <button className={[styles.btn, styles.vlBtn].join(' ')} onClick={() => onToggleMute(data)}>\r\n            <FontAwesomeIcon className={styles.vlIcon} icon={isMuted ? faVolumeMute : faVolumeUp} />\r\n          </button>\r\n          <div className={`${styles.downBtn} ${styles.btnChervon}`} onClick={onNextVideo}>\r\n            <FaAngleDown className={`${styles.icon} ${styles.iconDown}`} />\r\n          </div>\r\n          <div className={`${styles.upBtn} ${styles.btnChervon}`} onClick={onPrevVideo}>\r\n            <FaAngleUp className={`${styles.icon} ${styles.iconUp}`} />\r\n          </div>\r\n        </div>\r\n        <div className={styles.contentContainer}>\r\n          <div className={styles.userInfoContainer}>\r\n            <div className={styles.userInfo}>\r\n              <div to={`/@${data.user.nickname}`}>\r\n                <img\r\n                  className={styles.avatar}\r\n                  src={data.user.avatar}\r\n                  alt=\"avatar\"\r\n                  onError={handleErrorImage}\r\n                  ref={imageRef}\r\n                />\r\n              </div>\r\n              <div className={styles.userInfoLink}>\r\n                <Link className={styles.nickname} to={`/@${data.user.nickname}`}>\r\n                  {data.user.nickname}\r\n                </Link>\r\n                <Link className={styles.firstName} to={`/@${data.user.nickname}`}>\r\n                  {data.user.first_name}\r\n                </Link>\r\n              </div>\r\n              <Button\r\n                children=\"Follow\"\r\n                size=\"xl\"\r\n                color=\"colorPrimary\"\r\n                border\r\n                type=\"default\"\r\n                hoverPrimaryColor\r\n                onClick={loginModal}\r\n                onFollowUser={() => onFollowUser(data)}\r\n              />\r\n              <Modal isOpen={modalLogin === LOGIN_MODAL} style={customStyles}>\r\n                <Login\r\n                  title=\"Logout to Tiktok\"\r\n                  accountTitle=\"Bạn đã có tài khoản\"\r\n                  loginText=\"Đăng nhập\"\r\n                  onShowModalLogin={handleShowModalRegister}\r\n                  onCloseModal={loginModal}\r\n                />\r\n              </Modal>\r\n              <Modal isOpen={modalRegister === REGISTER_MODAL} style={customStyles}>\r\n                <Register\r\n                  title=\"Login to Tiktok\"\r\n                  accountTitle=\"Bạn không có tài khoản\"\r\n                  loginText=\"Đăng ký\"\r\n                  onShowModalRegister={handleShowModalLogin}\r\n                  onCloseModal={closeModal}\r\n                />\r\n              </Modal>\r\n            </div>\r\n          </div>\r\n          <div className={styles.videoInfoContainer}>\r\n            <div className={styles.actionContainer}>\r\n              <div className={styles.action} style={{ display: 'flex' }}>\r\n                <div className={styles.actionItem}>\r\n                  <div className={styles.iconWrap}>\r\n                    <div className={styles.barItem} onClick={() => onLikeCount(data)}>\r\n                      <AiFillHeart className={`${styles.iconHeart} ${data.is_liked ? styles.likeIcon : ''}`} />\r\n                    </div>\r\n                  </div>\r\n                  <span className={styles.votes}>{data.likes_count}</span>\r\n                </div>\r\n                <div className={styles.actionItem}>\r\n                  <div className={styles.barItem}>\r\n                    <FaCommentDots className={styles.icon} />\r\n                  </div>\r\n                  <span className={styles.votes}>{data.comments_count}</span>\r\n                </div>\r\n              </div>\r\n              <div className={styles.actionRight}>\r\n                <div className={styles.shareContainer}>\r\n                  <span>Chia sẻ với</span>\r\n                  <div className={styles.shareGroup}>\r\n                    <WhatsappShareButton\r\n                      className={styles.shareBtn}\r\n                      url={`http://www.facebook.com/sharer.php?u=${window.location.href}`}\r\n                    >\r\n                      <WhatsappIcon className={styles.iconFa} size={32} round />\r\n                    </WhatsappShareButton>\r\n                    <FacebookShareButton\r\n                      className={styles.shareBtn}\r\n                      url={`http://www.facebook.com/sharer.php?u=${window.location.href}`}\r\n                    >\r\n                      <FacebookIcon className={styles.iconFa} size={32} round />\r\n                    </FacebookShareButton>\r\n                    <TwitterShareButton url={`http://www.facebook.com/sharer.php?u=${window.location.href}`}>\r\n                      <TwitterIcon className={styles.iconFa} size={32} round />\r\n                    </TwitterShareButton>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className={styles.copyLinkContainer}>\r\n              <div className={styles.linkContainer}>{window.location.href}</div>\r\n              <div className={styles.copyContainer}>Sao chép liên kết</div>\r\n            </div>\r\n          </div>\r\n          {!token ? (\r\n            <div className={styles.commentContainer}>\r\n              <div className={styles.logoutContainer}>\r\n                <h3>Đăng nhập để xem bình luận</h3>\r\n                <p className={styles.desc}>Đăng nhập để xem bình luận và thích video</p>\r\n                <Button children=\"Đăng nhập\" color=\"white\" size=\"xxl\" type=\"primary\" hover onClick={openModal} />\r\n                <p className={styles.signUp}>\r\n                  Bạn không có tài khoản?\r\n                  <span className={styles.loginBtn}>Đăng ký</span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className={styles.commentContainer}>\r\n                <div className={styles.comments}>\r\n                  {comments.map(comment => (\r\n                    <Comment onDeleteComment={handleDeleteComment} commentPost={comment} key={comment.id} />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <form onSubmit={handleSubmit}>\r\n                <input type=\"text\" placeholder=\"Thêm bình luận\" value={valueInput} onChange={handleChangeValue} />\r\n                <button className={isValueInput ? styles.active : ''} type=\"submit\">\r\n                  Đăng\r\n                </button>\r\n              </form>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PostDetailModal\r\n","export default \"data:image/png;base64,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\"","import React, { useRef, useState, useEffect } from 'react'\r\nimport styles from './PostItem.module.scss'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPause, faPlay, faVolumeMute, faVolumeUp } from '@fortawesome/free-solid-svg-icons'\r\nimport { Link } from 'react-router-dom'\r\nimport config from '../../config'\r\nimport Button from '../common/Button'\r\nimport { AiFillHeart } from 'react-icons/ai'\r\nimport { FaCommentDots, FaShare } from 'react-icons/fa'\r\nimport Modal from 'react-modal'\r\nimport Login from '../Login'\r\nimport Register from '../../components/Register'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { hideModal, loginModal, registerModal } from '../../redux/actions'\r\nimport { Waypoint } from 'react-waypoint'\r\nimport userImage from '../../assets/img/user.jpg'\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    right: 'auto',\r\n    bottom: 'auto',\r\n    marginRight: '-50%',\r\n    transform: 'translate(-50%, -50%)'\r\n  }\r\n}\r\nconst token = window.localStorage.getItem('token')\r\nconst LOGIN_MODAL = 'LOGIN_MODAL'\r\nconst REGISTER_MODAL = 'REGISTER_MODAL'\r\nconst defaultFn = () => {}\r\nconst PostItem = ({\r\n  data = '',\r\n  hastag = '',\r\n  isMuted = false,\r\n  isPlaying = false,\r\n  stopWhenPaused = false,\r\n  isWaypoint = false,\r\n  onShowDetail = defaultFn,\r\n  onFollowUser = defaultFn,\r\n  onToggleMute = defaultFn,\r\n  getVideoRef = defaultFn,\r\n  onTogglePlay = defaultFn,\r\n  onEnterWaypoint = defaultFn,\r\n  onLikeCount = defaultFn,\r\n  onCommentCount = defaultFn\r\n}) => {\r\n  const videoRef = useRef(null)\r\n  const imageRef = useRef(null)\r\n  const modalLogin = useSelector(state => state.modal.modalLogin)\r\n  const modalRegister = useSelector(state => state.modal.modalRegister)\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    if (!videoRef.current) return\r\n    if (isPlaying) {\r\n      videoRef.current.play()\r\n    } else {\r\n      videoRef.current.pause()\r\n      if (stopWhenPaused) {\r\n        videoRef.current.currentTime = 0\r\n      }\r\n    }\r\n  }, [isPlaying, stopWhenPaused])\r\n\r\n  const getVideoWidth = () => {\r\n    const videoWidth = data.meta.video.resolution_x\r\n    const videoHeight = data.meta.video.resolution_y\r\n    const videoRatio = videoWidth / videoHeight\r\n    if (videoWidth > videoHeight) {\r\n      return `calc(400px + ((100vw - 768px) / 1152) * 100)`\r\n    }\r\n    return `calc(${videoRatio} * (400px + ((100vw - 768px) / 1152) * 100))`\r\n  }\r\n\r\n  const topOffsetVideo = () => {\r\n    return (window.innerHeight - 60) / 3\r\n  }\r\n\r\n  const bottomOffsetVideo = () => {\r\n    return (window.innerHeight - 60) / 3\r\n  }\r\n\r\n  const handleErrorImage = () => {\r\n    imageRef.current.src = userImage\r\n  }\r\n\r\n  const openModal = () => {\r\n    const action = loginModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const closeModal = () => {\r\n    const action = hideModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const handleShowModalRegister = () => {\r\n    const action = registerModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  const handleShowModalLogin = () => {\r\n    const action = loginModal()\r\n    dispatch(action)\r\n  }\r\n\r\n  return (\r\n    <div className={styles.postItem}>\r\n      <Link to={`${config.routes.home}@${data.user.first_name} ${data.user.last_name}`} className={styles.userAvatar}>\r\n        <img\r\n          src={data.user.avatar}\r\n          alt={data.user.nickname}\r\n          className={styles.avatarImg}\r\n          onError={handleErrorImage}\r\n          ref={imageRef}\r\n        />\r\n      </Link>\r\n      <div className={styles.postContent}>\r\n        <div className={styles.infoContent}>\r\n          <Link to={`${config.routes.home}@${data.user.first_name} ${data.user.last_name}`} rel=\"noopener\">\r\n            <h3 className={styles.authorUnique}>{data.user.nickname}</h3>\r\n          </Link>\r\n          <Link to={`${config.routes.home}${data.user.first_name} ${data.user.last_name}`} rel=\"noopener\">\r\n            <h4 className={styles.fullName}>{`${data.user.first_name} ${data.user.last_name}`}</h4>\r\n          </Link>\r\n        </div>\r\n        <div className={styles.caption}>\r\n          <Link to={`${config.routes.home}${data.user.first_name} ${data.user.last_name}`} rel=\"noopener\">\r\n            <strong>{hastag}</strong>\r\n          </Link>\r\n          <strong>{data.description}</strong>\r\n        </div>\r\n        {token ? (\r\n          <div className={styles.btnFollow}>\r\n            <Button\r\n              border\r\n              color=\"colorPrimary\"\r\n              size=\"sm\"\r\n              type=\"default\"\r\n              hoverPrimaryColor\r\n              textCenter\r\n              onClick={() => onFollowUser(data)}\r\n              actived={data.user.is_followed}\r\n            >\r\n              <span>{data.user.is_followed ? 'Đang follow' : 'Follow'}</span>\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className={styles.btnFollow}>\r\n            <Button\r\n              border\r\n              color=\"colorPrimary\"\r\n              size=\"sm\"\r\n              type=\"default\"\r\n              hoverPrimaryColor\r\n              textCenter\r\n              onClick={openModal}\r\n            >\r\n              <span>Follow</span>\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        <Modal isOpen={modalLogin === LOGIN_MODAL} style={customStyles}>\r\n          <Login\r\n            title=\"Logout to Tiktok\"\r\n            accountTitle=\"Bạn đã có tài khoản\"\r\n            loginText=\"Đăng nhập\"\r\n            onShowModalLogin={handleShowModalRegister}\r\n            onCloseModal={closeModal}\r\n          />\r\n        </Modal>\r\n        <Modal isOpen={modalRegister === REGISTER_MODAL} style={customStyles}>\r\n          <Register\r\n            title=\"Login to Tiktok\"\r\n            accountTitle=\"Bạn không có tài khoản\"\r\n            loginText=\"Đăng ký\"\r\n            onShowModalRegister={handleShowModalLogin}\r\n            onCloseModal={closeModal}\r\n          />\r\n        </Modal>\r\n        <div className={styles.content}>\r\n          <div className={styles.videoItem}>\r\n            <div className={styles.cardWrapper}>\r\n              <div className={styles.cardImage}>\r\n                {isWaypoint && (\r\n                  <Waypoint\r\n                    onEnter={() => onEnterWaypoint(data)}\r\n                    topOffset={topOffsetVideo()}\r\n                    bottomOffset={bottomOffsetVideo()}\r\n                  >\r\n                    <video\r\n                      style={{ width: getVideoWidth() }}\r\n                      className={styles.video}\r\n                      loop\r\n                      muted={isMuted}\r\n                      autoPlay\r\n                      ref={ref => {\r\n                        videoRef.current = ref\r\n                        getVideoRef(ref, data)\r\n                      }}\r\n                      poster={data.thumb_url}\r\n                      src={data.file_url}\r\n                      onClick={() => onShowDetail(data)}\r\n                    />\r\n                  </Waypoint>\r\n                )}\r\n                <span className={styles.overlay} />\r\n                <button className={[styles.btn, styles.playBtn].join(' ')} onClick={() => onTogglePlay(data)}>\r\n                  <FontAwesomeIcon className={styles.playIcon} icon={isPlaying ? faPause : faPlay} />\r\n                </button>\r\n                <button className={[styles.btn, styles.vlBtn].join(' ')} onClick={() => onToggleMute(data)}>\r\n                  <FontAwesomeIcon className={styles.vlIcon} icon={isMuted ? faVolumeMute : faVolumeUp} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className={styles.iconAction}>\r\n            <div className={styles.itemWrapper}>\r\n              <div className={styles.barItem} onClick={() => onLikeCount(data)}>\r\n                <AiFillHeart className={`${styles.icon} ${data.is_liked ? styles.likeIcon : ''}`} />\r\n              </div>\r\n              <strong>{data.likes_count}</strong>\r\n            </div>\r\n\r\n            <div className={styles.itemWrapper}>\r\n              <div className={styles.barItem} onClick={() => onCommentCount(data)}>\r\n                <FaCommentDots className={styles.icon} />\r\n              </div>\r\n              <strong>{data.comments_count}</strong>\r\n            </div>\r\n\r\n            <div className={styles.itemWrapper}>\r\n              <div className={styles.barItem}>\r\n                <FaShare className={styles.icon} />\r\n              </div>\r\n              <strong>{data.shares_count}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PostItem\r\n","import React, { useState, useRef, useCallback, useLayoutEffect } from 'react'\r\nimport axiosInstance from '../../axiosInstance'\r\nimport storage from '../../../src/utils/storage'\r\nimport { PostDetailModal } from '../../components/PostDetailModal'\r\nimport { Waypoint } from 'react-waypoint'\r\nimport PostItem from '../../components/PostItem'\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nconst Home = () => {\r\n  const [pagination, setPagination] = useState({\r\n    total: 0,\r\n    perPage: 0,\r\n    currentPage: 1,\r\n    totalPages: 0\r\n  })\r\n  const [posts, setPosts] = useState([])\r\n  const [comments, setComments] = useState([])\r\n  const [postInViewport, setPostInViewport] = useState(null)\r\n  const [isMuted, setIsMuted] = useState(storage.get('isMuted', true))\r\n  const [currentPost, setCurrentPost] = useState(null)\r\n  const videoRefs = useRef({})\r\n  const [valueInput, setValueInput] = useState('')\r\n  const currentVideoRef = useRef(null)\r\n  const stopWhenPaused = useRef(true)\r\n\r\n  useLayoutEffect(() => {\r\n    axiosInstance.get(`/api/posts?type=for-you&page=${pagination.currentPage}`).then(res => {\r\n      setPosts(prevState => [...prevState, ...res.data])\r\n      setPagination({\r\n        currentPage: res.meta.pagination.current_page,\r\n        total: res.meta.pagination.total,\r\n        perPage: res.meta.pagination.per_page,\r\n        totalPages: res.meta.pagination.total_pages\r\n      })\r\n    })\r\n  }, [pagination.currentPage])\r\n\r\n  const getVideoRefByPostId = postId => {\r\n    return videoRefs.current[postId]\r\n  }\r\n\r\n  const setVideoRefByPostId = (postId, ref) => {\r\n    return (videoRefs.current[postId] = ref)\r\n  }\r\n\r\n  const handleVideoRef = (ref, post) => {\r\n    setVideoRefByPostId(post.id, ref)\r\n  }\r\n\r\n  const checkPlaying = post => {\r\n    return postInViewport && postInViewport.id === post.id\r\n  }\r\n\r\n  const handleToggleMute = post => {\r\n    const videoRef = getVideoRefByPostId(post.id)\r\n    if (videoRef) {\r\n      videoRef.muted = !videoRef.muted\r\n      setIsMuted(videoRef.muted)\r\n      storage.set('isMuted', videoRef.muted)\r\n    }\r\n  }\r\n\r\n  const handleTogglePlay = post => {\r\n    stopWhenPaused.current = false\r\n    if (checkPlaying(post)) {\r\n      setPostInViewport(null)\r\n    } else {\r\n      setPostInViewport(post)\r\n    }\r\n  }\r\n\r\n  const handleFollowUser = post => {\r\n    let apiPath = `/api/users/${post.user.id}/${post.user.is_followed ? 'unfollow' : 'follow'}`\r\n    axiosInstance\r\n      .post(apiPath)\r\n      .then(res => {\r\n        const index = posts.findIndex(item => item.id === post.id)\r\n        const newPost = posts[index]\r\n        newPost.user = res.data\r\n        const newPosts = [...posts]\r\n        newPosts.splice(index, 1, newPost)\r\n        setPosts(newPosts)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  const handleWaypointEnter = post => {\r\n    if (currentPost) return\r\n    stopWhenPaused.current = true\r\n    setPostInViewport(post)\r\n  }\r\n\r\n  const handleLikeCount = post => {\r\n    console.log(123)\r\n    axiosInstance\r\n      .post(`/api/posts/${post.id}/${post.is_liked ? 'unlike' : 'like'}`)\r\n      .then(res => {\r\n        const postIndex = posts.findIndex(item => item.id === post.id)\r\n        const newPost = { ...res.data }\r\n        posts.splice(postIndex, 1, newPost)\r\n        setPosts(posts.slice(0))\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  const handleCommentCount = post => {\r\n    setCurrentPost(post)\r\n    window.history.pushState(null, document.title, getPostURL(post))\r\n  }\r\n\r\n  const handleShowDetailPost = post => {\r\n    const videoRef = getVideoRefByPostId(post.id)\r\n    if (videoRef) {\r\n      videoRef.pause()\r\n      currentVideoRef.current = videoRef.currentTime\r\n    }\r\n    setCurrentPost(post)\r\n    window.history.pushState(null, document.title, getPostURL(post))\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    if (valueInput === '') return\r\n    axiosInstance\r\n      .post(`/api/posts/${1}/comments`, {\r\n        comment: valueInput\r\n      })\r\n      .then(res => {\r\n        setComments(res.data)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    // Disabled restore scrolled by user\r\n    window.history.scrollRestoration = 'manual'\r\n\r\n    return () => {\r\n      // Enabled restore scrolled by user\r\n      window.history.scrollRestoration = 'auto'\r\n    }\r\n  }, [])\r\n\r\n  const getPostURL = post => {\r\n    return `/@${post.user.nickname}/video/${post.id}`\r\n  }\r\n\r\n  const scrollPostIntoView = useCallback(post => {\r\n    const videoRef = getVideoRefByPostId(post.id)\r\n    if (videoRef) {\r\n      videoRef.scrollIntoView({ block: 'center' })\r\n    }\r\n  }, [])\r\n\r\n  const handleCloseBtn = () => {\r\n    const videoRef = getVideoRefByPostId(currentPost.id)\r\n    if (videoRef) {\r\n      videoRef.currentTime = currentVideoRef.current\r\n      videoRef.play()\r\n    }\r\n    setCurrentPost(null)\r\n    window.history.back()\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    if (!currentPost) return\r\n    scrollPostIntoView(currentPost)\r\n    window.history.replaceState(null, document.title, getPostURL(currentPost))\r\n  }, [currentPost, scrollPostIntoView])\r\n\r\n  const handleNextVideo = () => {\r\n    currentVideoRef.current = 0\r\n    const currentIndex = posts.findIndex(post => post.id === currentPost.id)\r\n    if (currentIndex <= posts.length - 1) {\r\n      let newPost = posts[currentIndex + 1]\r\n      setCurrentPost(newPost)\r\n    }\r\n  }\r\n\r\n  const handlePrevVideo = () => {\r\n    currentVideoRef.current = 0\r\n    const currentIndex = posts.findIndex(post => post.id === currentPost.id)\r\n    if (currentIndex >= 0) {\r\n      let newPost = posts[currentIndex - 1]\r\n      setCurrentPost(newPost)\r\n    }\r\n  }\r\n\r\n  const handleNextPage = () => {\r\n    if (pagination.currentPage < pagination.totalPages) {\r\n      setPagination(prevState => ({\r\n        ...prevState,\r\n        currentPage: prevState.currentPage + 1\r\n      }))\r\n    }\r\n  }\r\n\r\n  const handleChangeValue = e => {\r\n    setValueInput(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '100px 0 20px' }}>\r\n      {posts.map(post => (\r\n        <PostItem\r\n          key={uuidv4()}\r\n          data={post}\r\n          onTogglePlay={handleTogglePlay}\r\n          onToggleMute={handleToggleMute}\r\n          isMuted={isMuted}\r\n          getVideoRef={handleVideoRef}\r\n          onFollowUser={handleFollowUser}\r\n          isPlaying={checkPlaying(post)}\r\n          stopWhenPaused={stopWhenPaused.current}\r\n          isWaypoint\r\n          onEnterWaypoint={handleWaypointEnter}\r\n          onLikeCount={handleLikeCount}\r\n          onCommentCount={handleCommentCount}\r\n          onShowDetail={handleShowDetailPost}\r\n        />\r\n      ))}\r\n\r\n      <Waypoint onEnter={handleNextPage}></Waypoint>\r\n\r\n      {currentPost && (\r\n        <PostDetailModal\r\n          key={uuidv4()}\r\n          data={currentPost}\r\n          onCloseBtn={handleCloseBtn}\r\n          isMuted={isMuted}\r\n          onToggleMute={handleToggleMute}\r\n          onNextVideo={handleNextVideo}\r\n          onPrevVideo={handlePrevVideo}\r\n          onSubmitForm={handleSubmit}\r\n          dataComment={comments}\r\n          onChangeValue={handleChangeValue}\r\n          valueInput={valueInput}\r\n          videoId={currentPost.uuid}\r\n          onFollowUser={handleFollowUser}\r\n          onLikeCount={handleLikeCount}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home\r\n"],"sourceRoot":""}